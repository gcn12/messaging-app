{"version":3,"sources":["9.png","Styles/InboxChatButton.styles.js","Components/InboxChatButtons.js","firebase.js","Styles/MessageInput.styles.js","Redux/actions/appActions.js","Redux/actions/inboxActions.js","Components/MessageInput.js","Styles/Messages.styles.js","Components/Messages.js","Styles/Scroll.styles.js","Components/Scroll.js","Styles/MessageContainer.styles.js","Redux/actions/requestsActions.js","Styles/RequestButtons.styles.js","Components/RequestButtons.js","Spinner/Spinner.styles.js","Components/MessageContainer.js","Spinner/Spinner.js","UnreadCircle.svg","Styles/Inbox.styles.js","Components/Inbox.js","Components/Requests.js","Styles/InboxContainer.styles.js","Components/InboxContainer.js","Styles/NewMessage.styles.js","Components/NewMessage.js","Styles/App.styles.js","Styles/ErrorBoundary.styles.js","Components/ErrorBoundary.js","Components/App.js","serviceWorker.js","Styles/Index.styles.js","Redux/reducers/appReducer.js","Redux/reducers/inboxReducer.js","Redux/actions/inboxContainerActions.js","Redux/reducers/inboxContainerReducer.js","Redux/reducers/requestsReducer.js","Redux/reducers/rootReducer.js","index.js"],"names":["module","exports","Button","styled","div","props","isChatState","ButtonContainer","InboxChatButtons","onClick","isChat","provider","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","GoogleAuthProvider","MessageInputContainer","MessageInputArea","textarea","MessageInputButton","button","isMessagesLoading","isLoadingBoolean","dispatch","type","payload","loadMessagesText","text","preventScrollDown","boolean","addQuantityLoadMessages","quantity","addMessages","messages","addAllCurrentUserIDs","allCurrentUserIDs","addAllCurrentUserEmails","allCurrentUserEmails","addAllUserEmails","allUserEmails","addNewMessageOtherUserEmail","otherUserEmail","addEmail","email","addCurrentChatID","currentChatID","addUser","user","addUserID","userID","isLoop","isLoopBoolean","isInboxTab","inboxTabBool","addAllInfoInbox","info","MessageInput","state","message","submitFunction","messageRef","messageID","otherUserID","otherUserDisplayName","otherUserPhotoURL","database","ref","once","snapshot","userIndex","allUserEmailsRedux","indexOf","newMessageOtherUserEmailRedux","userInfoArray","Object","keys","val","name","photoURL","addMessageID","addMessageIDToOtherUser","messagesRedux","length","itemRef","messageInfo","lastMessage","Date","now","user1Photo","user2Photo","userRedux","user1Email","user2Email","user1","user2","displayName","request","requestStatus","messageCount","push","then","collectionRef","path","pieces_","pop","addNewTime","setTimeout","update","usernameState","read","emailRedux","sent","setState","getMessages","test","currentChatIDRedux","messageRefValues","values","quantityLoadMessages","userMessageIDs","id","lastUpdated","submit","e","keyCode","shiftKey","clearUnread","preventDefault","document","getElementById","inputIDName","value","messagesIDName","scrollIntoView","handleMessageChange","target","messageKeys","messageValues","reverse","splice","valueIndex","readTime","className","this","onChange","placeholder","addEventListener","Component","connect","app","MessageOptionsContainer","isCurrentUser","UserMessageStyle","NewMessageHeader","MessagesContainer","Delete","Options","showOptions","Seen","Timestamp","ShowHideMessages","show","hide","onMouseLeave","userMessage","itemID","index","messagesQuantity","moment","unix","calendar","toLowerCase","removeItem","Number","Messages","itemId","remove","messageCountRef","map","key","idName","isMesssagesLoading","ScrollStyles","heightValue","Scroll","height","children","MessageContainerStyles","LoadContainer","LoadMore","addRequestCount","requestCount","isMessageRequest","isRequestBool","RequestButtonsContainer","DeleteButton","AcceptButton","RequestButtons","accept","input","keysArray","valuesArray","console","log","i","SpinnerOverlay","SpinnerContainer","MessagesSpinner","WrappedComponent","isLoading","otherProps","WithSpinner","MessageContainer","loadMoreMessages","a","runFunction","newMessageRoute","usernameFunc","username","requests","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","cx","cy","r","fill","_ref","svgRef","title","width","ForwardRef","forwardRef","InboxContainer","isCurrentThread","ImageContainer","ProfileImage","img","InboxUser","InboxMessage","UndreadContainer","UnreadStyles","UnreadCircle","compareLastMessageTimestamp","b","comparison","Inbox","allInfo","getMessageSummaries","currentUser","uid","on","messagesSnapshot","sort","messagesArray","requestArray","allUserIDs","finalInfoObject","messageSummary","infoObject","unreadMessages","unreadCount","unreadMessage","otherUserInfo","split","slice","inboxToMessages","inboxToMessagesAsync","allInfoInbox","alt","src","unread","inbox","InboxContainerStyle","TabsContainer","InboxTab","isSelected","RequestsTab","Requests","NewMessageButton","NewMessageInput","NewMessageContainer","NewMessage","isUserExist","handleEmail","createNewMessage","emailIndex","allCurrentUserEmailsRedux","allCurrentUserIDsRedux","CenterLogin","MobileContainer","ChatButtonsMobile","AppContainer","LogOutButton","LogInButton","InboxMessageContainer","AppTitle","HomepageContainer","InboxMobile","ErrorContainer","Image404","TextContainer","ErrorText","ErrorBoundary","hasError","error","photo404","App","showLogInButton","stayLoggedIn","onAuthStateChanged","getUserInfo","users","usersArray","userId","addUserDataTemp","userData","dateCreated","addUserData","set","logout","signOut","orderByKey","limitToLast","items","newState","item","ref_","login","signInWithPopup","result","counter","scrollDown","signInGuest","password","signInWithEmailAndPassword","catch","createGuest","createUserWithEmailAndPassword","userCredential","route","bool","style","display","marginRight","Boolean","window","location","hostname","match","IndexContainer","initialState","userIDRedux","messagesInboxRedux","allInfoRedux","rootReducer","combineReducers","action","inboxContainer","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6d603e4f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/9.fc515869.png\";","import styled from 'styled-components'\n\nexport const Button = styled.div`\n    color: white;\n    padding-right: 20px;\n    &:hover{\n        cursor: pointer\n    }\n    text-decoration: ${props=>(props.isChatState ? 'underline' : 'none')}\n`\n\nexport const ButtonContainer = styled.div`\n    display: flex;\n    justify-content: center;\n    &:hover{\n        cursor: pointer\n    }\n`","import React from 'react' \nimport { Button, ButtonContainer } from '../Styles/InboxChatButton.styles'\n\nconst InboxChatButtons = (props) => {\n    return(\n        <ButtonContainer>\n            <Button isChatState={!props.isChatState} onClick={()=>props.isChat(false)}>\n                Inbox\n            </Button>\n            <Button isChatState={props.isChatState} onClick={()=>props.isChat(true)}>\n                Chat\n            </Button>\n        </ButtonContainer>\n    )\n}\n\nexport default InboxChatButtons","import firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport 'firebase/auth'\nimport 'firebase/database'\n\nconst config = {\n    apiKey: \"AIzaSyDVflBKJPhm5bNZfYL5yoqT66NfyiPQgT0\",\n    authDomain: \"messages-598f6.firebaseapp.com\",\n    databaseURL: \"https://messages-598f6.firebaseio.com\",\n    projectId: \"messages-598f6\",\n    storageBucket: \"messages-598f6.appspot.com\",\n    messagingSenderId: \"1044285096751\",\n    appId: \"1:1044285096751:web:f00b017ec43ce7dd2557da\",\n    measurementId: \"G-KRSD66CD2T\"\n};\n\n\nconst firebaseApp = firebase.initializeApp(config)\nconst db = firebaseApp.firestore()\n\nexport { db }\nexport const provider = new firebase.auth.GoogleAuthProvider();\nexport const auth = firebase.auth();\n\nexport default firebase","import styled from 'styled-components'\n\nexport const MessageInputContainer = styled.div`\n    margin-top: 10px;\n    display: flex;\n    width: 100%;\n`\n \nexport const MessageInputArea = styled.textarea`\n    height: 40px;\n    width: 93%;\n    background-color: grey;\n    border: none;\n    color: white;\n`\n \nexport const MessageInputButton = styled.button`\n    border: solid 1px rgb(50,50,50);\n    background-color: rgb(50,50,50);\n    color: white;\n    &:hover {\n        cursor: pointer\n    }\n`","export const ADD_USER = \"ADD_USER\"\nexport const ADD_USERID = \"ADD_USERID\"\nexport const ADD_CURRENT_CHAT_ID = \"ADD_CURRENT_CHAT_ID\"\nexport const ADD_EMAIL = \"ADD_EMAIL\"\nexport const ADD_NEW_MESSAGE_OTHER_USER_EMAIL = 'ADD_NEW_MESSAGE_OTHER_USER_EMAIL'\nexport const ADD_ALL_USER_EMAILS = 'ADD_ALL_USER_EMAILS'\nexport const ADD_ALL_CURRENT_USER_EMAILS = 'ADD_ALL_CURRENT_USER_EMAILS'\nexport const ADD_ALL_CURRENT_USER_IDS = 'ADD_ALL_CURRENT_USER_IDS'\nexport const ADD_MESSAGES = 'ADD_MESSAGES'\nexport const ADD_QUANTITY_LOAD_MESSAGES = 'ADD_QUANTITY_LOAD_MESSAGES'\nexport const PREVENT_SCROLL_DOWN = 'PREVENT_SCROLL_DOWN'\nexport const LOAD_MESSAGES_TEXT = 'LOAD_MESSAGES_TEXT'\nexport const IS_MESSAGES_LOADING = 'IS_MESSAGES_LOADING'\n\nexport const isMessagesLoading = (isLoadingBoolean) => {\n    return(dispatch) => {\n        dispatch({type: IS_MESSAGES_LOADING, payload: isLoadingBoolean})\n    }\n}\n\nexport const loadMessagesText = (text) => {\n    return(dispatch)=> {\n        dispatch({type: LOAD_MESSAGES_TEXT, payload: text})\n    }\n}\n\nexport const preventScrollDown = (boolean) => {\n    return(dispatch)=> {\n        dispatch({type:PREVENT_SCROLL_DOWN, payload: boolean})\n    } \n}\n\nexport const addQuantityLoadMessages = (quantity) => {\n    return(dispatch) => {\n        dispatch({type: ADD_QUANTITY_LOAD_MESSAGES, payload: quantity})\n    }\n}\n\nexport const addMessages = (messages) => {\n    return (dispatch) => {\n        dispatch({type: ADD_MESSAGES, payload: messages})\n    }\n}\n\nexport const addAllCurrentUserIDs = (allCurrentUserIDs) => {\n    return(dispatch) => {\n        dispatch({type: ADD_ALL_CURRENT_USER_IDS, payload: allCurrentUserIDs})\n    }\n}\n\nexport const addAllCurrentUserEmails = (allCurrentUserEmails) => {\n    return(dispatch) => {\n        dispatch({type: ADD_ALL_CURRENT_USER_EMAILS, payload: allCurrentUserEmails})\n    }\n}\n\nexport const addAllUserEmails = (allUserEmails) => {\n    return(dispatch) => {\n        dispatch({type: ADD_ALL_USER_EMAILS, payload: allUserEmails})\n    }\n}\n\nexport const addNewMessageOtherUserEmail = (otherUserEmail) => {\n    return(dispatch) => {\n        dispatch({type: ADD_NEW_MESSAGE_OTHER_USER_EMAIL, payload: otherUserEmail})\n    }\n}\n\nexport const addEmail = (email) => {\n    return(dispatch) => {\n        dispatch({type: ADD_EMAIL, payload: email})\n    }\n}\n\nexport const addCurrentChatID = (currentChatID) => {\n    return(dispatch) => {\n        dispatch({type: ADD_CURRENT_CHAT_ID, payload: currentChatID})\n    }\n}\n\nexport const addUser = (user) => {\n    return(dispatch) => {\n        dispatch({ type: ADD_USER, payload: user })\n    }\n}\n\nexport const addUserID = (userID) => {\n    return(dispatch)=>{\n        dispatch({type: ADD_USERID, payload: userID})\n    }\n}","export const IS_INBOX_TAB = \"IS_INBOX_TAB\"\nexport const ADD_ALL_INFO_INBOX = 'ADD_ALL_INFO_INBOX'\nexport const IS_LOOP = 'IS_LOOP'\n\nexport const isLoop = (isLoopBoolean) => {\n    return(dispatch) => {\n        dispatch({type: IS_LOOP, payload: isLoopBoolean})\n    }\n}\n\nexport const isInboxTab = (inboxTabBool) => {\n    return(dispatch) => {\n        dispatch({type: IS_INBOX_TAB, payload: inboxTabBool})\n    }\n}\n\nexport const addAllInfoInbox = (info) => {\n    return(dispatch) => {\n        dispatch({type:ADD_ALL_INFO_INBOX, payload: info})\n    }\n}","import React, { Component } from \"react\"\nimport firebase from \"../firebase\"\nimport { MessageInputContainer, \n    MessageInputArea, \n    MessageInputButton, \n} from '../Styles/MessageInput.styles'\nimport { connect } from 'react-redux'\nimport { addCurrentChatID, addQuantityLoadMessages } from '../Redux/actions/appActions'\nimport { isInboxTab } from '../Redux/actions/inboxActions'\n\nconst mapStateToProps = (state) => ({\n    messagesRedux: state.app.messagesRedux,\n    emailRedux: state.app.emailRedux,\n    allUserEmailsRedux: state.app.allUserEmailsRedux,\n    currentChatIDRedux: state.app.currentChatIDRedux,\n    newMessageOtherUserEmailRedux: state.app.newMessageOtherUserEmailRedux,\n    userID: state.app.userID,\n    userRedux: state.app.userRedux,\n    quantityLoadMessages: state.app.quantityLoadMessages\n})\n \nclass MessageInput extends Component {\n\n    state = {\n        message: ''\n    }\n\n    submitFunction = () => {\n        let messageRef\n        let messageID\n        let otherUserID\n        let otherUserDisplayName\n        let otherUserPhotoURL\n        let otherUserEmail\n        const userIdRef = firebase.database().ref('users')\n        userIdRef.once('value', (snapshot)=> {\n            const userIndex = this.props.allUserEmailsRedux.indexOf(this.props.newMessageOtherUserEmailRedux)\n            const userInfoArray = Object.keys(snapshot.val())\n            otherUserID = userInfoArray[userIndex]\n            if(userIndex!==-1){\n                otherUserDisplayName = snapshot.val()[otherUserID].name\n                otherUserPhotoURL = snapshot.val()[otherUserID].photoURL\n                otherUserEmail = snapshot.val()[otherUserID].email\n            }\n        })\n        const addMessageID = firebase.database().ref(`users/${this.props.userID}/messages`)\n        let addMessageIDToOtherUser = firebase.database().ref(`users/${otherUserID}/messages`) \n        if(this.props.messagesRedux.length===0){\n            const itemRef = firebase.database().ref(\"messages\")\n            const messageInfo = {\n                lastMessage: Date.now(),\n                user1Photo: otherUserPhotoURL,\n                user2Photo: this.props.userRedux.photoURL,\n                user1Email: otherUserEmail,\n                user2Email: this.props.userRedux.email,\n                user1: otherUserDisplayName,\n                user2: this.props.userRedux.displayName,\n                request: otherUserEmail,\n                requestStatus: 'pending',\n                messageCount: 1,\n            }\n            itemRef.push(messageInfo)\n            .then(collectionRef => {\n                messageID = collectionRef.path.pieces_.pop()\n                \n                addMessageID.push({\n                    messageID: messageID,\n                    // lastMessage: Date.now(),\n                }).then(collectionRef => {\n                    const addNewTime = firebase.database().ref(`users/${this.props.userID}/messages/${collectionRef.path.pieces_.pop()}`)\n                    // const addNewTime = firebase.database().ref(`users/${this.props.userID}/messages/${messageID = collectionRef.path.pieces_.pop()}`)\n                    setTimeout(()=> addNewTime.update({\n                        lastMessage: Date.now(),\n                    }), 17)\n                })\n                \n                addMessageIDToOtherUser.push({\n                    messageID: messageID,\n                    lastMessage: Date.now(),\n                })\n                \n                this.props.dispatch(addCurrentChatID(messageID))\n                messageRef = firebase.database().ref(`messages/${messageID}`)\n                messageRef.update({\n                    lastMessage: Date.now()\n                })\n                const message = {\n                    user: this.props.usernameState,\n                    message: this.state.message,\n                    read: false, \n                    email: this.props.emailRedux,\n                    sent: Date.now(),\n                }\n                messageRef.push(message)\n                // document.getElementById(\"messageInput\").value=\"\"\n                this.setState({\n                    message: ''\n                })\n                this.props.getMessages(messageID)\n                this.props.dispatch(isInboxTab(true))  \n            })\n        }else{\n            const noEmptyMessage = /^(?!\\s*$).+/\n            if(noEmptyMessage.test(this.state.message)){\n                messageRef = firebase.database().ref(`messages/${this.props.currentChatIDRedux}`)\n                messageRef.once('value', (snapshot)=> {\n                    let messageRefValues = Object.values(snapshot.val())\n                    if(this.props.emailRedux!==messageRefValues[messageRefValues.length-2]){\n                        otherUserEmail = messageRefValues[messageRefValues.length-2]\n                    }else if (this.props.emailRedux!==messageRefValues[messageRefValues.length-5]){\n                        otherUserEmail = messageRefValues[messageRefValues.length-5]\n                    }\n                    messageRef.update({\n                        lastMessage: Date.now(),\n                        messageCount: messageRefValues[messageRefValues.length-9] + 1\n                    })\n                })\n                this.props.dispatch(addQuantityLoadMessages(this.props.quantityLoadMessages + 1))\n                const message = {\n                    user: this.props.usernameState,\n                    message: this.state.message,\n                    read: false, \n                    email: this.props.emailRedux,\n                    sent: Date.now(),\n                }\n                messageRef.push(message)\n                const messageRefTest = firebase.database().ref('users')\n                messageRefTest.once('value', (snapshot)=> {\n                    for (let userID in snapshot.val()){\n                        if(snapshot.val()[userID].email===otherUserEmail){\n                            otherUserID = userID\n                        }\n                    }\n                })\n                addMessageID.once('value', (snapshot)=> {\n                    const userMessageIDs = snapshot.val()\n                    for (let id in userMessageIDs){\n                        if (userMessageIDs[id].messageID  === this.props.currentChatIDRedux){\n                            const idTimestampRef = firebase.database().ref(`users/${this.props.userID}/messages/${id}`)\n                            idTimestampRef.update({\n                                lastMessage: Date.now()\n                            })\n                        }\n                    }\n                })\n                addMessageIDToOtherUser = firebase.database().ref(`users/${otherUserID}/messages`) \n                addMessageIDToOtherUser.once('value', (snapshot)=> {\n                    for (let id in snapshot.val()){\n                        if (snapshot.val()[id].messageID  === this.props.currentChatIDRedux){\n                            const idTimestampRef = firebase.database().ref(`users/${otherUserID}/messages/${id}`)\n                            idTimestampRef.update({\n                                lastMessage: Date.now()\n                            })\n                        }\n                    }\n                })\n                const lastUpdatedRef = firebase.database().ref(`users/${this.props.userID}`)\n                lastUpdatedRef.update({\n                    lastUpdated: Date.now()\n                })\n                this.setState({\n                    message: ''\n                })\n                this.props.getMessages(this.props.currentChatIDRedux)\n                // document.getElementById(\"messageInput\").value=\"\"\n                \n            }\n        }\n    }\n\n    submit = (e) => {\n        if(this.state.message.length>0){\n            if (e.keyCode){\n                if (e.keyCode===13 && !e.shiftKey){\n                    this.clearUnread(this.props.currentChatIDRedux)\n                    e.preventDefault()\n                    this.submitFunction()\n                    document.getElementById(this.props.inputIDName).value = \"\"\n                }\n            }else{\n                e.preventDefault()\n                this.clearUnread(this.props.currentChatIDRedux)\n                this.submitFunction()\n                if (document.getElementById(this.props.messagesIDName)){\n                    document.getElementById(this.props.messagesIDName).scrollIntoView()\n                }\n                document.getElementById(this.props.inputIDName).value = \"\"\n            }\n        }\n    }\n\n    handleMessageChange = (e) => {\n        this.setState({\n          message: e.target.value\n        })\n    }\n\n    clearUnread = (messageID) => {\n        if(this.props.messagesRedux.length>0){\n            const messageRef = firebase.database().ref(`messages/${messageID}`)\n            messageRef.once('value', (snapshot) => {\n                let messages = snapshot.val()\n                let messageKeys = Object.keys(messages)\n                let messageValues = Object.values(messages)\n                messageKeys.reverse().splice(0,10)\n                messageValues.reverse().splice(0,10)\n                let valueIndex = 0\n                for (let value of messageValues) {\n                    if(value.read===false){\n                        if(value.email !== this.props.emailRedux){\n                            const firebaseMessageRef = firebase.database().ref(`messages/${messageID}/${messageKeys[valueIndex]}`)\n                            firebaseMessageRef.update({\n                                read: true,\n                                readTime: Date.now()\n                            })\n                            valueIndex++\n                        }\n                    }else{\n                        break\n                    }\n                }\n            })\n        }\n    }\n\n    render(){\n        return(\n            <MessageInputContainer>\n                <MessageInputArea className=\"br3\" onClick={()=>this.clearUnread(this.props.currentChatIDRedux)} id={this.props.inputIDName} onChange={this.handleMessageChange} placeholder=\"enter message\"></MessageInputArea>\n                <MessageInputButton onClick={this.submit}>Send</MessageInputButton>\n            </MessageInputContainer>\n        ) \n    }\n    componentDidMount(){\n        document.addEventListener(\"keydown\", this.submit)\n    }\n}\n\nexport default connect(mapStateToProps)(MessageInput)\n","import styled from \"styled-components\"\n\nexport const MessageOptionsContainer = styled.div`\n    display: flex;\n    flex-direction: ${props => (props.isCurrentUser ? \"row-reverse\" : \"row\")};\n    align-items: center;\n`\n\nexport const UserMessageStyle = styled.div`\n    color: white;\n    background-color: ${props => (props.isCurrentUser ? \"rgb(45, 45, 45)\" : \"rgb(80, 80, 80)\")};\n    border: rgb(20,20,20) solid 1px;\n    max-width: 45%;\n    min-width: 15%;\n    word-wrap:break-word;\n    &:hover {\n        cursor: pointer\n    }\n`\n\nexport const NewMessageHeader = styled.div`\n    color: white;\n`\n\nexport const MessagesContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n`\n\nexport const Delete = styled.button`\n    color: white;\n    border: none;\n    background-color: rgb(45, 45, 45);\n    &:hover {\n        cursor:pointer\n    }\n`\n\nexport const Options = styled.div`\n    margin-top: 1rem;\n    background: rgb(70,70,70);\n    visibility: ${props=> (props.showOptions ?  'null': 'hidden')};\n`\n\nexport const Seen = styled.div`\n    font-size: 10px;\n`\n\nexport const Timestamp = styled.div`\n    color: rgb(220,220,220);\n`","import React, { Component } from \"react\"\nimport { UserMessageStyle,\n    NewMessageHeader, \n    MessagesContainer, \n    Options, \n    MessageOptionsContainer,\n    Delete,\n    Seen,\n    Timestamp,\n} from  \"../Styles/Messages.styles\"\nimport { connect } from 'react-redux'\nimport firebase from '../firebase'\nimport moment from 'moment'\n\nconst mapStateToProps = (state) => ({\n    messagesRedux: state.app.messagesRedux,\n    emailRedux: state.app.emailRedux,\n    currentChatIDRedux: state.app.currentChatIDRedux,\n    newMessageOtherUserEmailRedux: state.app.newMessageOtherUserEmailRedux,\n    isMesssagesLoading: state.app.isMesssagesLoading,\n    quantityLoadMessages: state.app.quantityLoadMessages,\n})\n\nclass ShowHideMessages extends Component {\n    state = {\n        showOptions: false,\n    }\n\n    show = () => {\n        if(this.state.showOptions){\n            this.setState({\n                showOptions: false\n            })\n        }else{\n            this.setState({\n                showOptions: true\n            })\n        }\n    }\n\n    hide = () => {\n        this.setState({\n            showOptions: false\n        })\n    }\n\n    render() {\n        return(\n            this.props.message ? \n            <MessageOptionsContainer onMouseLeave={this.hide} isCurrentUser={this.props.emailRedux===this.props.email ? true : false}>\n                <UserMessageStyle isCurrentUser={this.props.emailRedux===this.props.email ? true : false} onClick={this.show} className={this.props.user===this.props.userMessage ? \"current-user grow br3 pa3 ma1 dib bw2 shadow-5\" : \"other-user grow br3 pa3 ma2 dib bw2 shadow-5\"}>\n                    {this.props.itemID!==\"lastMessage\"&&this.props.itemID!==\"user1\"&&this.props.itemID!==\"user2\"&&this.props.itemID!==\"user2Photo\"&&this.props.itemID!==\"user1Photo\"&&this.props.itemID!==\"user2Email\"&&this.props.itemID!==\"user1Email\" ? \n                    <div>\n                    {/* <div id={this.props.idName}></div> */}\n                        {this.props.message}\n                        {(this.props.index===this.props.messagesQuantity-11)&&(this.props.readTime>0)&&(this.props.email===this.props.emailRedux) ? \n                        <Seen>Seen {moment.unix(this.props.readTime/1000).calendar().toLowerCase()}</Seen>\n                        :\n                        null\n                        }\n                    </div>\n                    : \n                    null\n                    }\n                </UserMessageStyle>\n                <Options isCurrentUser={this.props.emailRedux===this.props.email ? true : false} className='br3 pa2 ma1 dib shadow-5' showOptions={this.state.showOptions}>\n                    {this.props.emailRedux===this.props.email ? \n                    <Delete onClick={()=>this.props.removeItem(this.props.itemID)}>Delete</Delete>\n                    :\n                    null\n                    }\n                    <Timestamp>{moment.unix(Number(this.props.sent)/1000).calendar()}</Timestamp>\n                </Options>\n            </MessageOptionsContainer>\n            : \n            null\n        )\n    }\n}\n\nclass Messages extends Component {\n\n    removeItem = (itemId) => {\n        const itemRef = firebase.database().ref(`/messages/${this.props.currentChatIDRedux}/${itemId}`)\n        itemRef.remove()\n        const messageCountRef = firebase.database().ref(`messages/${this.props.currentChatIDRedux}`)\n        messageCountRef.once('value', (snapshot) => {\n            let messageCount = snapshot.val().messageCount\n            messageCountRef.update({\n                messageCount: messageCount - 1\n            })\n        })\n    }\n\n    render() {\n        return(\n            <MessagesContainer>\n                {/* <button onClick={()=>console.log(props.messagesRedux)}>push</button> */}\n                {this.props.currentChatIDRedux===\"NEW MESSAGE\" ? \n                    <NewMessageHeader>\n                        Send new message to: {this.props.newMessageOtherUserEmailRedux}\n                    </NewMessageHeader>\n                    :\n                    null\n                }\n                \n                {this.props.messagesRedux.map((message, index)=> {\n                    return(\n                        <ShowHideMessages\n                        messagesQuantity={this.props.messagesRedux.length}\n                        index={index}\n                        readTime={message.readTime}\n                        emailRedux={this.props.emailRedux}\n                        removeItem={this.removeItem}\n                        key={index}\n                        message={message.message}\n                        email={message.email}\n                        userMessage={message.user}\n                        itemID={message.itemId}\n                        sent={message.sent}\n                        // id={this.props.messagesIDName}\n                        idName={index===this.props.messagesRedux.length-11 ? 'desktop-messages': null}\n                        />\n                    )\n                })\n                }\n            </MessagesContainer>\n        )\n    }\n}\n\nexport default connect(mapStateToProps)(Messages)","import styled from 'styled-components'\n\nexport const ScrollStyles = styled.div`\n    overflow: scroll;\n    \n    @media (max-width: 900px) {\n        height: ${props=> (props.heightValue ? 'calc(100vh - 298px)' : 'calc(100vh - 100px)')};\n    }\n    @media (min-width: 900px) {\n        height: ${props=> (props.heightValue ? 'calc(102vh - 230px)' : 'calc(96vh - 140px)')};\n    }\n    @media (max-height: 500px) {\n        height: ${props=> (props.heightValue ? 'calc(102vh - 320px)' : 'calc(100vh - 170px)')};\n    }\n`","import React from \"react\"\nimport { ScrollStyles } from '../Styles/Scroll.styles'\n\nconst Scroll = (props) => {\n    return(\n        // <div style={{overflow: \"scroll\", border: \"5px black\", height: props.height, display:props.display, flexDirection:props.flexDirection}}>\n        //     {props.children}\n        // </div>\n        <ScrollStyles heightValue={props.height}>\n            {props.children}\n        </ScrollStyles>\n    )\n}\n\nexport default Scroll","import styled from \"styled-components\"\n\nexport const MessageContainerStyles = styled.div`\n    @media (max-width: 900px){\n        width: 100vw;\n        height: calc(98vh - 270px);\n    }\n    @media (min-width: 900px){\n        width: 55vw;\n        height: calc(100vh - 200px);\n    }\n    @media (min-width: 1100px){\n        width: 700px;\n        height: calc(100vh - 200px);\n    }\n    @media (max-height: 500px){\n        height: calc(100vh - 200px);\n    }\n    border: 5px solid rgb(30,30,30);\n` \n\nexport const LoadContainer = styled.div`\n    display: flex;\n    justify-content: center;\n`\n\nexport const LoadMore = styled.button`\n    color: white;\n    background-color: rgb(40,40,40);\n    border: none;\n    &:hover {\n        cursor: pointer\n    }\n`","export const ADD_REQUEST_COUNT = 'ADD_REQUEST_COUNT'\nexport const IS_MESSAGE_REQUEST = 'IS_MESSAGE_REQUEST'\n\nexport const addRequestCount = (requestCount) => {\n    return(dispatch) => {\n        dispatch({type: ADD_REQUEST_COUNT, payload: requestCount})\n    }\n}\n\nexport const isMessageRequest = (isRequestBool) => {\n    return(dispatch) => {\n        dispatch({type: IS_MESSAGE_REQUEST, payload: isRequestBool})\n    }\n}","import styled from 'styled-components'\n\nexport const RequestButtonsContainer = styled.div`\n    display: flex;\n    width: 50vw;\n`\n\nexport const DeleteButton = styled.button`\n    background-color: rgb(40,40,40);\n    color: white;\n    border: none;\n    justify-content: center;\n    &:hover{\n        cursor:pointer\n    }\n`\n\nexport const AcceptButton = styled.button`\n    background-color: rgb(40,40,40);\n    color: white;\n    border: none;\n    justify-content: center;\n    &:hover{\n        cursor:pointer\n    }\n`","import React, { Component } from 'react'\nimport firebase from '../firebase'\nimport { connect } from 'react-redux'\nimport { \n    isInboxTab, \n    // isLoop \n} from '../Redux/actions/inboxActions'\nimport { isMessageRequest } from '../Redux/actions/requestsActions'\nimport { addMessages, addCurrentChatID } from '../Redux/actions/appActions'\nimport { RequestButtonsContainer,\n    DeleteButton,\n    AcceptButton,\n} from '../Styles/RequestButtons.styles'\n\nconst mapStateToProps = (state) => ({\n    currentChatIDRedux: state.app.currentChatIDRedux,\n    userID: state.app.userID,\n    messagesRedux: state.app.messagesRedux,\n    emailRedux: state.app.emailRedux,\n})\n\n\nclass RequestButtons extends Component {\n    clearUnread = (messageID) => {\n        if(this.props.messagesRedux.length>0){\n            const messageRef = firebase.database().ref(`messages/${messageID}`)\n            messageRef.once('value', (snapshot) => {\n                let messages = snapshot.val()\n                let messageKeys = Object.keys(messages)\n                let messageValues = Object.values(messages)\n                messageKeys.reverse().splice(0,9)\n                messageValues.reverse().splice(0,9)\n                let valueIndex = 0\n                for (let value of messageValues) {\n                    if(value.read===false){\n                        if(value.email !== this.props.emailRedux){\n                            const firebaseMessageRef = firebase.database().ref(`messages/${messageID}/${messageKeys[valueIndex]}`)\n                            firebaseMessageRef.update({\n                                read: true,\n                                readTime: Date.now()\n                            })\n                            valueIndex++\n                        }\n                    }else{\n                        break\n                    }\n                }\n            })\n        }\n    }\n    accept = (input) => {\n        const acceptRef = firebase.database().ref(`messages/${this.props.currentChatIDRedux}`)\n        acceptRef.update({\n            requestStatus: input,\n            lastMessage: Date.now()\n        })\n        // const lastUpdatedRef = firebase.database().ref(`users/${this.props.userID}`)\n        // lastUpdatedRef.update({\n        //     lastUpdated: Date.now()\n        // })\n        if (input===\"accepted\"){\n            // this.props.dispatch(isLoop(true))\n            this.clearUnread(this.props.currentChatIDRedux)\n            this.props.dispatch(isInboxTab(true))\n            //this.props.dispatch(addCurrentChatID(null))\n        }else{\n            const findDeleteRef = firebase.database().ref(`users/${this.props.userID}/messages`)\n            findDeleteRef.once('value', (snapshot)=> {\n                let keysArray = Object.keys(snapshot.val())\n                let valuesArray = Object.values(snapshot.val())\n                console.log(keysArray)\n                console.log(valuesArray)\n                for (let i = 0; i < valuesArray.length; i++){\n                    if(valuesArray[i].messageID===this.props.currentChatIDRedux){\n                        console.log(`users/${this.props.userID}/${keysArray[i]}`)\n                        const deleteRef = firebase.database().ref(`/users/${this.props.userID}/messages/${keysArray[i]}`)\n                        deleteRef.remove()\n                        break\n                    }\n                }\n            })\n            this.props.dispatch(addMessages([]))\n            this.props.dispatch(addCurrentChatID(null))\n        }\n        this.props.dispatch(isMessageRequest(false))\n    }\n\n    render() {\n        return(\n            <RequestButtonsContainer>\n                <DeleteButton onClick={()=>this.accept('rejected')} className='br2'>Delete</DeleteButton>\n                <AcceptButton onClick={()=>this.accept('accepted')} className='br2'>Accept</AcceptButton>\n            </RequestButtonsContainer>\n        )\n    }\n\n}\n\nexport default connect(mapStateToProps)(RequestButtons)","import styled from 'styled-components';\n\nexport const SpinnerOverlay = styled.div`\n  height: 60vh;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const SpinnerContainer = styled.div`\n  display: inline-block;\n  width: 100px;\n  height: 100px;\n  border: 3px solid rgba(195, 195, 195, 0.6);\n  border-radius: 50%;\n  border-top-color: rgb(230,230,230);\n  animation: spin 1s ease-in-out infinite;\n  -webkit-animation: spin 1s ease-in-out infinite;\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n`;","import React, { Component } from \"react\"\nimport MessageInput from \"./MessageInput\"\nimport Messages from \"./Messages\"\nimport Scroll from \"./Scroll\" \nimport { \n    MessageContainerStyles, \n    LoadMore, \n    LoadContainer\n} from \"../Styles/MessageContainer.styles\"\nimport { connect } from 'react-redux'\nimport RequestButtons from \"./RequestButtons\"\nimport { \n    addQuantityLoadMessages,\n    preventScrollDown,\n} from '../Redux/actions/appActions'\nimport WithSpinner from '../Spinner/Spinner'\n\nconst MessagesSpinner = WithSpinner(Messages)\n\nconst mapStateToProps = (state) => ({\n    currentChatIDRedux: state.app.currentChatIDRedux,\n    messagesRedux: state.app.messagesRedux,\n    isMessageRequest: state.requests.isMessageRequest,\n    loadMessagesText: state.app.loadMessagesText,\n    isMessagesLoading: state.app.isMessagesLoading,\n    quantityLoadMessages: state.app.quantityLoadMessages,\n})\n\nclass MessageContainer extends Component {\n\n    loadMoreMessages = () => {\n        const runFunction = async () => {\n            await this.props.dispatch(preventScrollDown(true))\n            await this.props.dispatch(addQuantityLoadMessages(this.props.quantityLoadMessages + 15))\n            await this.props.getMessages(this.props.currentChatIDRedux)\n        }\n        runFunction()\n    }\n\n    render() {\n        return(\n            <div>\n                <MessageContainerStyles className=\"message-container\">\n                    <Scroll height={true}>\n                    {this.props.messagesRedux.length > 23 ? \n                    <LoadContainer>\n                        <LoadMore onClick={this.loadMoreMessages}>{this.props.loadMessagesText}</LoadMore>\n                    </LoadContainer>\n                    :\n                    null\n                    }\n                        <MessagesSpinner\n                        isLoading={this.props.isMessagesLoading} \n                        removeItem={this.props.removeItem} \n                        user={this.props.usernameState}\n                        messagesIDName={this.props.messagesIDName}\n                        />\n                        <div id={this.props.messagesIDName}></div>\n                    </Scroll>\n                </MessageContainerStyles>\n                    {this.props.currentChatIDRedux!==null ? \n                    (this.props.isMessageRequest ? \n                        <RequestButtons />\n                        :\n                        <MessageInput \n                        messagesIDName={this.props.messagesIDName}\n                        inputIDName={this.props.inputIDName}\n                        newMessageRoute={this.props.newMessageRoute}\n                        usernameState={this.props.usernameState}\n                        getMessages={this.props.getMessages} \n                        usernameFunc={this.props.username} \n                        />\n                        )\n                    :\n                    null\n                    }  \n            </div>\n        )\n    }\n}\n\nexport default connect(mapStateToProps)(MessageContainer)","import React from 'react';\nimport { SpinnerContainer, SpinnerOverlay } from './Spinner.styles';\n\nconst WithSpinner = WrappedComponent => {\n  const Spinner = ({ isLoading, ...otherProps }) => {\n    return isLoading ? (\n      <SpinnerOverlay>\n        <SpinnerContainer />\n      </SpinnerOverlay>\n    ) : (\n      <WrappedComponent {...otherProps} />\n    );\n  };\n  return Spinner;\n};\n\nexport default WithSpinner;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 20,\n  cy: 20,\n  r: 16,\n  fill: \"rgb(26, 26, 26)\"\n});\n\nvar SvgUnreadCircle = function SvgUnreadCircle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 40,\n    width: 40,\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgUnreadCircle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/UnreadCircle.8c406109.svg\";\nexport { ForwardRef as ReactComponent };","import styled from \"styled-components\"\nimport { ReactComponent as UnreadCircle } from '../UnreadCircle.svg'\n\nexport const InboxContainer = styled.div`\n    height: 90px;\n    cursor: pointer;\n    border: solid rgb(5,5,5) 1px;\n    background-color: ${props=>(props.isCurrentThread ? \"rgb(100,100,100) \" : \"rgb(40,40,40)\")} ;\n    color: white;\n    display: flex;\n    width: 97%;\n`\n\nexport const ImageContainer = styled.div`\n    width: 25%;\n    float: left;\n    align-items: center;\n`\n\nexport const ProfileImage = styled.img`\n    padding-left: 10px;\n    height: 60px;\n    width: 60px;\n    object-fit: cover;\n`\n\nexport const MessageContainer = styled.div`\n    float: left;\n    width: 50%;\n    height: 50%;\n`\n\nexport const InboxUser = styled.div`\n    font-size: 20px;\n`\n\nexport const InboxMessage = styled.div`\n    word-wrap:break-word;\n`\n\n\nexport const UndreadContainer = styled.div`\n    float: right;\n    width: 25%;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n`\n\nexport const UnreadCircleIcon = styled(UnreadCircle)`\n\n`\n\nexport const UnreadStyles = styled.div`\n    position: absolute;\n`\n\n","import React, { Component } from \"react\"\nimport firebase from \"../firebase\"\nimport \"firebase/auth\"\nimport \"firebase/firestore\"\nimport { \n    InboxMessage, \n    ProfileImage, \n    InboxContainer, \n    UnreadStyles,\n    UndreadContainer, \n    ImageContainer,\n    MessageContainer,\n    InboxUser,\n} from \"../Styles/Inbox.styles\"\nimport { ReactComponent as UnreadCircle } from \"../UnreadCircle.svg\"\nimport { connect } from 'react-redux'\nimport { addAllCurrentUserEmails, addAllCurrentUserIDs, isMessagesLoading } from '../Redux/actions/appActions'\nimport { addRequestCount, isMessageRequest } from \"../Redux/actions/requestsActions\"\nimport { addAllInfoInbox, isLoop } from '../Redux/actions/inboxActions'\n\nconst mapStateToProps = (state) => ({\n    currentChatIDRedux: state.app.currentChatIDRedux,\n    emailRedux: state.app.emailRedux,\n    isInboxTab: state.inbox.isInboxTab,\n    requestCount: state.requests.requestCount,\n    allInfoInbox: state.inbox.allInfoInbox,\n    messagesRedux: state.app.messagesRedux,\n    userRedux: state.app.userRedux,\n    isLoop: state.inbox.isLoop,\n})\n\nconst compareLastMessageTimestamp = (a, b) => {\n    let comparison = 0\n    if (a.lastMessage < b.lastMessage){\n        comparison = 1\n    } else if (a.lastMessage > b.lastMessage){\n        comparison = -1\n    } \n    return comparison\n}\n\nclass Inbox extends Component {\n\n    state = {\n        messages: [],\n        allInfo: [],\n    }\n\n    getMessageSummaries = () => {\n        const userID = firebase.auth().currentUser\n        const messagesRef = firebase.database().ref(`users/${userID.uid}`)\n        messagesRef.on('value', (snapshot)=> {\n            const messagesSnapshot = snapshot.val()\n            if(messagesSnapshot){\n                if(messagesSnapshot.messages){\n                    let messageInfo = Object.values(messagesSnapshot.messages)\n                    messageInfo = messageInfo.sort(compareLastMessageTimestamp)\n                    let messagesArray = []\n                    let requestArray = []\n                    let allUserIDs = []\n                    let allUserEmails = []\n                    let finalInfoObject = {}\n                    for (let i=0; i < messageInfo.length; i++){\n                        const messageSummary = firebase.database().ref(`messages/${messageInfo[i].messageID}`)\n                        let lastMessage \n                        messageSummary.on('value', (snapshot)=> {\n                            if(snapshot.val()){\n                                let infoObject = {}\n                                lastMessage = Object.values(snapshot.val())\n                                let unreadMessages = Object.values(snapshot.val())\n                                unreadMessages.reverse().splice(0,10)\n                                let unreadCount = 0\n                                for (let unreadMessage of unreadMessages) {\n                                    if(unreadMessage.read===false){\n                                        if(unreadMessage.email!==userID.email){\n                                            unreadCount++\n                                        }\n                                    }else{\n                                        break\n                                    }\n                                }\n                                const otherUserInfo = Object.values(snapshot.val())\n                                let otherUserDisplayName \n                                let otherUserPhotoURL\n                                if (otherUserInfo[otherUserInfo.length-3]===userID.displayName){\n                                    otherUserDisplayName = otherUserInfo[otherUserInfo.length-6]\n                                } else {\n                                    otherUserDisplayName = otherUserInfo[otherUserInfo.length-3]\n                                }\n                                if(otherUserInfo[otherUserInfo.length-1]===userID.photoURL){\n                                    otherUserPhotoURL = otherUserInfo[otherUserInfo.length-4]\n                                } else {\n                                    otherUserPhotoURL = otherUserInfo[otherUserInfo.length-1]\n                                }\n                                if(otherUserInfo[otherUserInfo.length-2]===userID.email){\n                                    allUserEmails.push(otherUserInfo[otherUserInfo.length-5])\n                                } else {\n                                    allUserEmails.push(otherUserInfo[otherUserInfo.length-2])\n                                }\n                                lastMessage = lastMessage[lastMessage.length-11]\n                                if(lastMessage){\n                                    lastMessage = Object.values(lastMessage)[1]\n                                    if(lastMessage.length+lastMessage.split(\" \").length > 31){\n                                        lastMessage = lastMessage.slice(0, 31)\n                                        lastMessage += \"...\"\n                                    }\n                                }\n                                allUserIDs.push(messageInfo[i].messageID)\n                                infoObject[\"message\"] = lastMessage\n                                infoObject[\"photoURL\"] = otherUserPhotoURL\n                                infoObject[\"displayName\"] = otherUserDisplayName\n                                infoObject[\"unread\"] = unreadCount\n                                if(snapshot.val().requestStatus==='accepted'||snapshot.val().request!==this.props.emailRedux){\n                                    finalInfoObject[messageInfo[i].messageID] = infoObject\n                                    this.setState({\n                                        allInfo: finalInfoObject\n                                    })\n                                    this.props.dispatch(addAllInfoInbox(finalInfoObject))\n                                    messagesArray.push(messageInfo[i].messageID)\n                                }\n                                if(snapshot.val().request===this.props.emailRedux&&snapshot.val().requestStatus==='pending'){\n                                    requestArray.push(messageInfo[i].messageID)\n                                }else{\n                                    // if(continueLoop){\n                                    // if(this.props.isLoop){\n                                        // console.log(this.props.currentChatIDRedux)\n                                        if(i===0){\n\n                                            if(this.props.currentChatIDRedux===null){\n                                                if(snapshot.val().requestStatus!=='rejected'||snapshot.val().request!==this.props.emailRedux){\n                                                    this.props.newMessageRoute(messageInfo[i].messageID)\n                                                    this.props.dispatch(isLoop(false))\n                                                    // continueLoop = false\n                                                }\n                                            }\n                                        }\n                                    // }\n                                }\n                                this.props.dispatch(addRequestCount(requestArray.length))\n                            }\n                            this.props.dispatch(isMessagesLoading(false))\n                        })\n                        this.props.dispatch(addAllCurrentUserEmails(allUserEmails))\n                        this.props.dispatch(addAllCurrentUserIDs(allUserIDs))\n                    }\n                    if(this.props.messagesRedux.length >=  messagesArray.length+requestArray.length){\n                        if(document.getElementById(this.props.messagesIDName)){\n                            document.getElementById(this.props.messagesIDName).scrollIntoView();\n                        }\n                    }\n                    this.setState({\n                        messages: messagesArray,\n                    })\n                }else{\n                    this.props.dispatch(isMessagesLoading(false))\n                }\n            }   \n            this.props.dispatch(isMessagesLoading(false))\n        })\n    } \n\n\n    test = () => {\n        console.log(Object.values(this.state.allInfo))\n    }\n\n    inboxToMessages = (messageID) => {\n        this.props.newMessageRoute(messageID)\n        const messageRef = firebase.database().ref(`messages/${messageID}`)\n        messageRef.on('value', (snapshot) => {\n            if(snapshot.val()){\n                let messages = snapshot.val()\n                let messageKeys = Object.keys(messages)\n                let messageValues = Object.values(messages)\n                messageKeys.reverse().splice(0,8)\n                messageValues.reverse().splice(0,8)\n                messageValues.map((value,index) => {\n                    if(value.read===false){\n                        if(value.email!==this.props.emailRedux){\n                            const updateMessageRef = firebase.database().ref(`messages/${messageID}/${messageKeys[index]}`)\n                            updateMessageRef.update({\n                                read: true,\n                                readTime: Date.now()\n                            })\n                        }\n                    }\n                    return null\n                })\n                // document.getElementById(this.props.messagesIDName).scrollIntoView();\n            }\n        })\n    }\n\n    inboxToMessagesAsync = (messageID) => {\n        if(messageID !== this.props.currentChatIDRedux){\n            const runFunction = async () => {\n                await this.props.dispatch(isMessageRequest(false))\n                await this.inboxToMessages(messageID)\n                // await document.getElementById(this.props.messagesIDName).scrollIntoView();\n            }\n            runFunction()\n        }\n    } \n\n    componentDidMount(){\n        // this.props.dispatch(isLoop(true))\n        this.props.dispatch(addRequestCount(0))\n        setTimeout(()=> this.getMessageSummaries(), 100)\n        \n    }\n    \n    render() {\n        return(\n            <div>\n                {Object.values(this.props.allInfoInbox).map((message, index)=> {\n                    return(\n                        <InboxContainer className=\"br3 pa3 ma2\" isCurrentThread={this.props.currentChatIDRedux===this.state.messages[index] ? true : false} onClick={()=>this.inboxToMessagesAsync(this.state.messages[index])} key={index}>\n                            <ImageContainer>\n                                <ProfileImage alt=\"user profile\" src={message.photoURL}></ProfileImage>\n                            </ImageContainer>\n                            <MessageContainer>\n                                <InboxUser>{message.displayName}</InboxUser>\n                                <InboxMessage >{message.message}</InboxMessage>\n                            </MessageContainer>\n                            {message.unread > 0 ? \n                                <UndreadContainer>\n                                    <UnreadCircle></UnreadCircle>\n                                    <UnreadStyles>{message.unread}</UnreadStyles>\n                                </UndreadContainer>\n                            :\n                            null\n                            }\n                        </InboxContainer>\n                    )\n                    })\n                }\n                </div>\n        )\n    }\n}\n\nexport default connect(mapStateToProps)(Inbox)","import React, { Component } from \"react\"\nimport firebase from \"../firebase\"\nimport \"firebase/auth\"\nimport \"firebase/firestore\"\nimport { \n    InboxMessage, \n    ProfileImage, \n    InboxContainer,  \n    ImageContainer,\n    MessageContainer,\n    InboxUser,\n} from \"../Styles/Inbox.styles\"\nimport { connect } from 'react-redux'\nimport { addAllCurrentUserEmails, \n    addAllCurrentUserIDs, \n    // addCurrentChatID \n} from '../Redux/actions/appActions'\nimport { isMessageRequest } from \"../Redux/actions/requestsActions\"\n\nconst mapStateToProps = (state) => ({\n    currentChatIDRedux: state.app.currentChatIDRedux,\n    emailRedux: state.app.emailRedux,\n    isInboxTab: state.inbox.isInboxTab,\n})\n\nconst compareLastMessageTimestamp = (a, b) => {\n    let comparison = 0\n    if (a.lastMessage < b.lastMessage){\n        comparison = 1\n    } else if (a.lastMessage > b.lastMessage){\n        comparison = -1\n    } \n    return comparison\n}\n\nclass Inbox extends Component {\n\n    state = {\n        messages: [],\n        allInfo: [],\n    }\n\n    getMessageSummaries = () => {\n        const userID = firebase.auth().currentUser\n        const messagesRef = firebase.database().ref(`users/${userID.uid}`)\n        messagesRef.on('value', (snapshot)=> {\n            const messagesSnapshot = snapshot.val()\n            if(messagesSnapshot){\n                if(messagesSnapshot.messages){\n                    let messageInfo = Object.values(messagesSnapshot.messages)\n                    messageInfo = messageInfo.sort(compareLastMessageTimestamp)\n                    let messagesArray = []\n                    let allUserIDs = []\n                    let allUserEmails = []\n                    let finalInfoObject = {}\n                    for (let message of messageInfo){\n                        const messageSummary = firebase.database().ref(`messages/${message.messageID}`)\n                        let lastMessage \n                        messageSummary.on('value', (snapshot)=> {\n                            if(snapshot.val()){\n                                let infoObject = {}\n                                lastMessage = Object.values(snapshot.val())\n                                let unreadCount = 0\n                                const otherUserInfo = Object.values(snapshot.val())\n                                let otherUserDisplayName \n                                let otherUserPhotoURL\n                                if (otherUserInfo[otherUserInfo.length-3]===userID.displayName){\n                                    otherUserDisplayName = otherUserInfo[otherUserInfo.length-6]\n                                } else if (otherUserInfo[otherUserInfo.length-6]===userID.displayName){\n                                    otherUserDisplayName = otherUserInfo[otherUserInfo.length-3]\n                                }\n                                if(otherUserInfo[otherUserInfo.length-1]===userID.photoURL){\n                                    otherUserPhotoURL = otherUserInfo[otherUserInfo.length-4]\n                                } else if(otherUserInfo[otherUserInfo.length-4]===userID.photoURL){\n                                    otherUserPhotoURL = otherUserInfo[otherUserInfo.length-1]\n                                }\n                                if(otherUserInfo[otherUserInfo.length-2]===userID.email){\n                                    allUserEmails.push(otherUserInfo[otherUserInfo.length-5])\n                                } else if(otherUserInfo[otherUserInfo.length-5]===userID.email){\n                                    allUserEmails.push(otherUserInfo[otherUserInfo.length-2])\n                                }\n                                lastMessage = lastMessage[lastMessage.length-11]\n                                if(lastMessage){\n                                    lastMessage = Object.values(lastMessage)[1]\n                                    if(lastMessage.length+lastMessage.split(\" \").length > 31){\n                                        lastMessage = lastMessage.slice(0, 31)\n                                        lastMessage += \"...\"\n                                    }\n                                }\n                                allUserIDs.push(message.messageID)\n                                infoObject[\"message\"] = lastMessage\n                                infoObject[\"photoURL\"] = otherUserPhotoURL\n                                infoObject[\"displayName\"] = otherUserDisplayName\n                                infoObject[\"unread\"] = unreadCount\n                                if(snapshot.val().request===this.props.emailRedux&&snapshot.val().requestStatus==='pending'){\n                                    finalInfoObject[message.messageID] = infoObject\n                                    this.setState({\n                                        allInfo: finalInfoObject\n                                    })\n                                    messagesArray.push(message.messageID)\n                                }\n                            }\n                            if(document.getElementById(this.props.messagesIDName)){\n                                document.getElementById(this.props.messagesIDName).scrollIntoView();\n                            }\n                        })\n                        this.props.dispatch(addAllCurrentUserEmails(allUserEmails))\n                        this.props.dispatch(addAllCurrentUserIDs(allUserIDs))\n                    }\n                    this.setState({\n                        messages: messagesArray,\n                    })\n                }\n            }\n                \n        })\n    } \n\n    test = () => {\n    }\n\n    inboxToMessagesAsync = (messageID) => {\n        const runFunction = async () => {\n            await this.props.dispatch(isMessageRequest(true))\n            await this.props.newMessageRoute(messageID, 'requests')\n            // await document.getElementById('scroll-here').scrollIntoView();\n        }\n        runFunction()\n    } \n\n    componentDidMount(){\n        this.getMessageSummaries()\n    }\n    \n    render() {\n        return(\n            <div>\n                {/* <button onClick={(this.test)}>push</button> */}\n                {this.state.messages.length > 0 \n                ?\n                <div>\n                    \n                    {this.props.isInboxTab ? \n                    null\n                    :\n                        Object.values(this.state.allInfo).map((message, index)=> {\n                            return(\n                                <InboxContainer className=\"br3 pa3 ma2\" isCurrentThread={this.props.currentChatIDRedux===this.state.messages[index] ? true : false} onClick={()=>this.inboxToMessagesAsync(this.state.messages[index])} key={index}>\n                                    <ImageContainer>\n                                        <ProfileImage alt=\"user profile\" src={message.photoURL}></ProfileImage>\n                                    </ImageContainer>\n                                    <MessageContainer>\n                                        <InboxUser>{message.displayName}</InboxUser>\n                                        <InboxMessage >{message.message}</InboxMessage>\n                                    </MessageContainer>\n                                </InboxContainer>\n                                )\n                        })\n                    \n                    }\n                </div>\n                :\n                null\n                }\n            </div>\n        )\n    }\n}\n\nexport default connect(mapStateToProps)(Inbox)","import styled from \"styled-components\"\n\nexport const InboxContainerStyle = styled.div`\n    @media (max-width: 900px) {\n        width: 100vw;\n        height: 86vh; \n    }\n    @media (min-width: 900px) {\n        width: 400px;\n        height: 200px; \n    }\n`\n\nexport const TabsContainer = styled.div`\n    display: flex;\n    color: white;\n    justify-content: space-evenly;\n`\n\nexport const InboxTab = styled.div`\n    &:hover {\n        cursor: pointer\n    };\n    text-decoration: ${props=> (props.isSelected ? 'underline' : 'null')}\n`\n\nexport const RequestsTab = styled.div`\n    &:hover {\n        cursor: pointer;\n    };\n    text-decoration: ${props=> (props.isSelected ? 'null' : 'underline')}\n`","import React from \"react\"\nimport Inbox from \"./Inbox\"\nimport Requests from './Requests'\nimport { InboxContainerStyle } from \"../Styles/InboxContainer.styles\"\nimport Scroll from \"./Scroll\"\nimport { connect } from 'react-redux'\nimport { isInboxTab } from \"../Redux/actions/inboxActions\"\nimport { TabsContainer,\n    InboxTab,\n    RequestsTab, \n} from '../Styles/InboxContainer.styles'\n// import { ScrollStyles } from '../Styles/Scroll.styles'\n\nconst mapStateToProps = (state) => ({\n    isInboxTab: state.inbox.isInboxTab,\n    requestCount: state.requests.requestCount\n})\n\nconst InboxContainer = (props) => {\n    return(\n        <div>\n            <TabsContainer>\n                <InboxTab isSelected={props.isInboxTab} onClick={()=>props.dispatch(isInboxTab(true))}>Inbox</InboxTab>\n                <RequestsTab isSelected={props.isInboxTab} onClick={()=>props.dispatch(isInboxTab(false))}>Requests ({props.requestCount})</RequestsTab>\n            </TabsContainer>\n            {props.isInboxTab ? \n            <Scroll height={false}>\n                <InboxContainerStyle>\n                    <Inbox \n                    messagesIDName={props.messagesIDName}\n                    newMessageRoute={props.newMessageRoute}\n                    />\n                </InboxContainerStyle>\n            </Scroll>\n            :\n            <Scroll height={false}>\n                <InboxContainerStyle>\n                    <Requests \n                    messagesIDName={props.messagesIDName}\n                    newMessageRoute={props.newMessageRoute}\n                    />\n                </InboxContainerStyle>\n            </Scroll> \n            }\n        </div>\n    )\n}\n\nexport default connect(mapStateToProps)(InboxContainer)","import styled from \"styled-components\"\n\nexport const NewMessageButton = styled.button`\n    height: 35px;\n    width: 40px;\n    cursor: pointer;\n    background-color: rgb(50,50,50);\n    color: white;\n    border: none;\n`\n\nexport const NewMessageInput = styled.input`\n    height: 30px;\n    width: 250px;\n    cursor: pointer;\n    background-color: darkgray;\n    color: white;\n    border: none;\n    margin: 0 5px 0 10px;\n`\n\nexport const NewMessageContainer = styled.div`\n    color: white;\n`","import React, { Component } from \"react\"\n// import firebase from \"./firebase\"\nimport { NewMessageButton, NewMessageInput, NewMessageContainer } from \"../Styles/NewMessage.styles\"\nimport { connect } from 'react-redux'\nimport { addMessages } from '../Redux/actions/appActions'\nimport { addCurrentChatID, addNewMessageOtherUserEmail } from '../Redux/actions/appActions'\n\nconst mapStateToProps = (state) => ({\n    allUserEmailsRedux: state.app.allUserEmailsRedux,\n    emailRedux: state.app.emailRedux,\n    allCurrentUserEmailsRedux: state.app.allCurrentUserEmailsRedux,\n    allCurrentUserIDsRedux: state.app.allCurrentUserIDsRedux,\n})\n\nclass NewMessage extends Component {\n\n    state = {\n        email: \"\",\n        isUserExist: \"\",\n    }\n\n    handleEmail = (e) => {\n        this.setState({\n            email: e.target.value\n        })\n    }\n\n    createNewMessage = () => {\n        if(this.state.email.length>0){\n            const emailIndex = this.props.allCurrentUserEmailsRedux.indexOf(this.state.email)\n            if(emailIndex!==-1){\n                this.props.getMessages(this.props.allCurrentUserIDsRedux[emailIndex])\n                this.props.dispatch(addCurrentChatID(this.props.allCurrentUserIDsRedux[emailIndex]))\n                if(this.state.isUserExist===\"user does not exist\"){\n                    this.setState({\n                        isUserExist: \"\",\n                    })\n                }\n            }else{\n                for(let email of this.props.allUserEmailsRedux) {\n                    if(this.state.email===this.props.emailRedux){\n                        break\n                    }else if(email===this.state.email){\n                        this.props.dispatch(addMessages([]))\n                        this.props.dispatch(addCurrentChatID('NEW MESSAGE'))\n                        this.props.dispatch(addNewMessageOtherUserEmail(this.state.email))\n                        this.setState({\n                            isUserExist: \"\"\n                        })\n                        document.getElementById(\"email-input\").value=\"\"\n                        break\n                    }else{\n                        this.setState({\n                            isUserExist: \"user does not exist\"\n                        })\n                    }\n                }\n            }\n        }\n    }\n\n    render() {\n        return(\n            <NewMessageContainer>\n                {/* New Message */}\n                <NewMessageInput className=\"br2\" id=\"email-input\" onChange={this.handleEmail} placeholder=\"enter email\"></NewMessageInput>\n                <NewMessageButton className=\"br2\" onClick={this.createNewMessage}>+</NewMessageButton>\n                <div>{this.state.isUserExist}</div>\n            </NewMessageContainer>\n        )\n    }\n} \n\nexport default connect(mapStateToProps)(NewMessage) ","import styled from \"styled-components\"\n\nexport const CenterLogin = styled.div`\n    position: absolute;\n    top: 55%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n`\n\nexport const MobileContainer = styled.div`\n    @media (min-width: 900px){\n        display: none;\n    }\n`\n\nexport const ChatButtonsMobile = styled.div`\n    @media (min-width: 900px) {\n        display: none;\n    }\n`\n\nexport const AppContainer = styled.div`\n    width: 100%;\n`\n\nexport const LogOutButton = styled.button`\n    border: none;\n    color: white;\n    cursor: pointer;\n    background-color: rgb(80, 80, 80);\n    margin: 5px 5px 5px 10px;\n`\n\nexport const LogInButton = styled.button`\n    border: none;\n    /* height: 5vh;\n    width: 20vw; */\n    padding: 15px 20px;\n    min-width: 200px;\n    color: white;\n    cursor: pointer;\n    background-color: rgb(18, 208, 255);\n    /* position: absolute; */\n    /* top: 55%;\n    left: 50%;\n    transform: translate(-50%, -50%); */\n    font-family: 'Lato';\n    font-size:calc(12px + 1vw);\n    &:hover {\n        background-color: green;\n    }\n`\n\nexport const InboxMessageContainer = styled.div`\n    display: flex;\n`\n\nexport const AppTitle = styled.div`\n    font-size: calc(8px + 3vw);\n    color: white;\n    font-family: 'Lato';\n    position: absolute;\n    top: 45%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n`\n\nexport const HomepageContainer = styled.div`\n`\n\nexport const InboxMobile = styled.div`\n    @media (max-width: 900px) {\n        display: none;\n    }\n    display: flex;\n`","import styled from 'styled-components'\n\nexport const ErrorContainer = styled.div`\n`\n\nexport const ImageContainer = styled.div`\n    display: flex;\n    justify-content: center;\n    width: 100%\n    height: 100%\n`\n\nexport const Image404 = styled.img`\n    max-width: 50%;\n    max-height: 50%\n    display: flex;\n    align-self: center;\n`\n\nexport const TextContainer = styled.div`\n    display: flex;\n    justify-content: center;\n`\n\nexport const ErrorText = styled.div`\n    color: white;\n    font-family: 'Lato', sans-serif;\n`","import React, { Component } from 'react'\nimport { Image404, \n    ErrorText, \n    ErrorContainer,  \n    TextContainer,\n    ImageContainer,\n} from '../Styles/ErrorBoundary.styles'\nimport photo404 from '../9.png'\n\nclass ErrorBoundary extends Component {\n    state = {\n        hasError: false\n    }\n\n    static getDerivedStateFromError(error) {\n        return { hasError: true }\n    }\n\n    componentDidCatch(error, info){\n        console.log(error)\n    }\n\n    render(){\n        if(this.state.hasError) {\n            return(\n                <ErrorContainer>\n                    <TextContainer>\n                        <ErrorText>Something went wrong</ErrorText>\n                    </TextContainer>\n                    <ImageContainer>\n                        <Image404 src={photo404}></Image404>\n                    </ImageContainer>\n                </ErrorContainer>\n            )\n        }\n        return this.props.children\n    }\n}\n\nexport default ErrorBoundary","import React, { Component } from 'react';\nimport InboxChatButtons from './InboxChatButtons'\nimport firebase, {auth, provider} from \"../firebase\"\nimport MessageContainer from \"./MessageContainer\"\nimport InboxContainer from \"./InboxContainer\"\nimport NewMessage from \"./NewMessage\"\nimport { AppContainer, \n  LogInButton, \n  InboxMessageContainer, \n  AppTitle,\n  LogOutButton,\n  HomepageContainer,\n  InboxMobile,\n  ChatButtonsMobile,\n  MobileContainer,\n  CenterLogin,\n} from \"../Styles/App.styles\"\nimport { connect } from 'react-redux'\nimport ErrorBoundary from './ErrorBoundary'\nimport { \n  addUser,\n  addUserID,\n  addCurrentChatID,\n  addEmail,\n  addNewMessageOtherUserEmail,\n  addAllUserEmails,\n  addAllCurrentUserIDs,\n  addAllCurrentUserEmails,\n  addMessages,\n  preventScrollDown,\n  loadMessagesText,\n  isMessagesLoading,\n  addQuantityLoadMessages,\n} from '../Redux/actions/appActions'\n\nconst mapStateToProps = (state) => ({\n  messagesRedux: state.app.messagesRedux,\n  userRedux: state.app.userRedux,\n  currentChatIDRedux: state.app.currentChatIDRedux,\n  isMessageRequest: state.requests.isMessageRequest,\n  emailRedux: state.app.emailRedux,\n  quantityLoadMessages: state.app.quantityLoadMessages,\n  preventScrollDown: state.app.preventScrollDown,\n})\n\nclass App extends Component {\n  state = {\n    username: \"\",\n    showLogInButton: false,\n    isMessagesLoading: true,\n    isChat: true\n  }\n  \n  username = (e) => {\n    this.setState({\n      username: e.target.value\n    })\n  }\n  \n  stayLoggedIn = () => {\n    auth.onAuthStateChanged((user)=> {\n      if(user){\n        if(user.displayName) {\n          this.setState({\n            username: user.displayName,\n          })\n        }else{\n          this.setState({\n            username: 'Guest',\n          })\n        }\n        this.props.dispatch(addEmail(user.email))\n        this.props.dispatch(addUserID(user.uid))\n        this.props.dispatch(addUser(user))\n        this.getUserInfo()\n      }else{\n        this.setState({\n          showLogInButton: true,\n        })\n      }\n    })\n  }\n\n  getUserInfo = () => {\n    const itemRef = firebase.database().ref(\"users\")\n    itemRef.on('value', (snapshot) => {\n      let users = snapshot.val()\n      let usersArray = []\n      for (let userId in users){\n        usersArray.push(users[userId].email)\n      }\n      this.props.dispatch(addAllUserEmails(usersArray))\n    })\n  }\n  \n  componentDidMount() {\n    this.stayLoggedIn()\n    // this.addUserDataTemp(\"bob\", \"bill@cyan.com\", \"https://lh3.googleusercontent.com/a-/AOh14GiEWMCD6XAm34qOIe9A3LcvcHcPToUSdOroPHcb\")\n  }\n\n  addUserDataTemp = (name, email, photoURL) => {\n    const userData = {\n      name: name,\n      email: email,\n      dateCreated: Date.now(),\n      photoURL: photoURL,\n    }\n    firebase.database().ref(`users`).push(userData)\n  }\n\n  addUserData = (name, email, uid, photoURL) => {\n    const userData = {\n      name: name,\n      email: email,\n      dateCreated: Date.now(),\n      photoURL: photoURL,\n    }\n    firebase.database().ref(`users/${uid}`).set(userData)\n  }\n  \n  removeItem = (itemId) => {\n    const itemRef = firebase.database().ref(`/messages/${this.props.currentChatIDRedux}/${itemId}`)\n    itemRef.remove()\n  }\n  \n  logout = () => {\n    auth.signOut()\n    this.props.dispatch(addMessages([]))\n    this.props.dispatch(addAllCurrentUserIDs([]))\n    this.props.dispatch(addAllCurrentUserEmails([]))\n    this.props.dispatch(addAllUserEmails([]))\n    this.props.dispatch(addNewMessageOtherUserEmail(''))\n    this.props.dispatch(addEmail(''))\n    this.props.dispatch(addCurrentChatID(null))\n    this.props.dispatch(addUser(null))\n    this.props.dispatch(addUserID(''))\n  }\n\n  getMessages = (id) => {\n    const itemRef = firebase.database().ref(`messages/${id}`)\n    let limitMessages = itemRef.orderByKey().limitToLast(this.props.quantityLoadMessages)\n    limitMessages.on('value', (snapshot) => {\n      let items = snapshot.val()\n      let newState = []\n      if(items){\n        if(items['requestStatus']==='accepted'||items['request']!==this.props.emailRedux||(items['request']===this.props.emailRedux&&items['requestStatus']==='pending')){\n          for (let item in items) {\n            newState.push({\n              itemId: item,\n              user: items[item].user,\n              message: items[item].message,\n              email: items[item].email,\n              sent: items[item].sent,\n              read: items[item].read,\n              readTime: items[item].readTime,\n            })\n          }\n          if(!this.props.preventScrollDown){\n            if (document.getElementById('mobile-messages')){\n              document.getElementById('mobile-messages').scrollIntoView()\n            }  \n            if (document.getElementById('desktop-messages')){\n              document.getElementById('desktop-messages').scrollIntoView()\n            }\n            this.props.dispatch(preventScrollDown(false))\n          }\n          if(this.props.messagesRedux){\n            if(items.messageCount === (newState.length-10)){\n              this.props.dispatch(loadMessagesText('No more messages'))\n            }\n          }\n          if(this.props.currentChatIDRedux===snapshot.ref_.path.pieces_[1]||this.props.currentChatIDRedux===id){\n            this.props.dispatch(addMessages(newState))\n          }\n        }\n      }\n      this.props.dispatch(isMessagesLoading(false))\n    })\n    if(!this.props.preventScrollDown){\n      if (document.getElementById('mobile-messages')){\n        document.getElementById('mobile-messages').scrollIntoView()\n      }  \n      if (document.getElementById('desktop-messages')){\n        document.getElementById('desktop-messages').scrollIntoView()\n      }\n    }\n    this.props.dispatch(preventScrollDown(false))\n  }\n\n  login = () => {\n    auth.signInWithPopup(provider)\n    .then((result) => {\n      const user = result.user\n      this.setState({\n        user,\n        username: user.displayName\n      })\n      const userRef = firebase.database().ref(\"users\")\n      userRef.once('value', (snapshot)=>{\n        let users = snapshot.val()\n        let counter = 0\n        for (const userData in users){\n          if (users[userData].email===user.email){\n            counter++\n          }\n        }\n        if(counter===0){\n          this.addUserData(user.displayName, user.email, user.uid, user.photoURL)\n        }\n      })\n      this.getUserInfo()\n    })\n  }\n\n  scrollDown = () => {\n    if (document.getElementById('scroll-here')){\n      document.getElementById('scroll-here').scrollIntoView()\n    }\n  }\n\n  signInGuest = (email, password) => {\n    firebase.auth().signInWithEmailAndPassword('hello123@gmail.com', 'hello123')\n    .then((result) => {\n      const user = result.user\n      this.setState({\n        user,\n        username: user.displayName\n      })\n      const userRef = firebase.database().ref(\"users\")\n      userRef.once('value', (snapshot)=>{\n        let users = snapshot.val()\n        let counter = 0\n        for (const userData in users){\n          if (users[userData].email===user.email){\n            counter++\n          }\n        }\n        if(counter===0){\n          this.addUserData(user.displayName, user.email, user.uid, user.photoURL)\n        }\n      })\n      this.getUserInfo()\n      // var user = userCredential.user;\n      // ...\n    })\n    .catch((error) => {\n      // var errorCode = error.code;\n      // var errorMessage = error.message;\n    });\n  }\n  createGuest = (email, password) => {\n    firebase.auth().createUserWithEmailAndPassword('hello123@gmail.com', 'hello123')\n    .then((userCredential) => {\n      // Signed in \n      // var user = userCredential.user;\n      // ...\n    })\n    .catch((error) => {\n      // var errorCode = error.code;\n      // var errorMessage = error.message;\n      // ..\n    });\n  }\n\n  newMessageRoute = (input) => {\n    if (input !== this.props.currentChatIDRedux){\n      const route = async (input) => {\n        await this.props.dispatch(addCurrentChatID(input))\n        await this.props.dispatch(addQuantityLoadMessages(24))\n        await this.getMessages(input)\n        await this.props.dispatch(loadMessagesText('Load more messages'))\n        await this.scrollDown()\n      }\n      route(input)\n    }\n  }\n\n  test = () => {\n  }\n\n  isChat = (bool) => {\n    this.setState({\n      isChat: bool\n    })\n  }\n\n  render(){\n    return (\n      <AppContainer>\n        <ErrorBoundary>\n          {/* <button onClick={this.test}>clear</button> */}\n          {this.props.userRedux ?\n            <LogOutButton className=\"br1 br3 pa2 ma1 dib\" onClick={this.logout}>\n              Log Out | {this.state.username}\n            </LogOutButton>             \n            :\n            (\n              this.state.showLogInButton ? \n            <HomepageContainer>\n              <AppTitle>Messaging App</AppTitle>\n              <CenterLogin>\n                <div style={{display: 'flex'}}>\n                  <LogInButton onClick={this.signInGuest}>LOG IN AS GUEST</LogInButton>   \n                  <div style={{marginRight: '10px'}}></div>           \n                  <LogInButton onClick={this.login}>LOG IN WITH GOOGLE</LogInButton>\n                </div>\n              </CenterLogin>\n            </HomepageContainer>\n              :\n              null\n            )\n          }\n          {this.props.userRedux ? \n          <div>\n            <NewMessage \n            getMessages={this.getMessages}\n            newMessageRoute={this.newMessageRoute}\n            />\n            <ChatButtonsMobile>\n              <InboxChatButtons isChat={this.isChat} isChatState={this.state.isChat} />\n            </ChatButtonsMobile>\n            <InboxMessageContainer>\n              <InboxMobile>\n                <InboxContainer \n                messagesIDName='mobile-messages' \n                newMessageRoute={this.newMessageRoute} \n                />\n                <MessageContainer \n                messagesIDName='mobile-messages'\n                inputIDName='mobile-input'\n                newMessageRoute={this.newMessageRoute}\n                getMessages={this.getMessages}\n                usernameFunc={this.username}\n                usernameState={this.state.username}\n                removeItem={this.removeItem}\n                />\n              </InboxMobile>\n              <MobileContainer>\n                {this.state.isChat ? \n                <MessageContainer \n                messagesIDName='desktop-messages'\n                inputIDName='desktop-input'\n                newMessageRoute={this.newMessageRoute}\n                getMessages={this.getMessages}\n                usernameFunc={this.username}\n                usernameState={this.state.username}\n                removeItem={this.removeItem}\n                />\n                :\n                <InboxContainer \n                messagesIDName='desktop-messages'\n                newMessageRoute={this.newMessageRoute}\n                />\n                }\n              </MobileContainer>\n            </InboxMessageContainer>\n          </div>\n          :\n          null\n          }\n        </ErrorBoundary>\n      </AppContainer>\n    );\n  }\n}\n\nexport default connect(mapStateToProps)(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import styled from \"styled-components\"\n\nexport const IndexContainer = styled.div`\n    // background-color: rgb(28,28,28);\n    background-color: rgb(18,18,23)\n    color: white;\n`","import * as actions from '../actions/appActions'\n\nexport const initialState = {\n    userRedux: '',\n    userIDRedux: '',\n    currentChatIDRedux: null,\n    emailRedux: '',\n    newMessageOtherUserEmailRedux: '',\n    allUserEmailsRedux: [],\n    allCurrentUserEmailsRedux: [],\n    allCurrentUserIDsRedux: [],\n    messagesRedux: [],\n    quantityLoadMessages: 24,\n    preventScrollDown: false,\n    loadMessagesText: 'Load more messages',\n    isMessagesLoading: true,\n}\n\nexport default function appReducer(state=initialState, action) {\n    switch(action.type){\n        case actions.IS_MESSAGES_LOADING:\n            return {...state, isMessagesLoading: action.payload}\n        case actions.LOAD_MESSAGES_TEXT:\n            return{...state, loadMessagesText: action.payload}\n        case actions.PREVENT_SCROLL_DOWN:\n            return{...state, preventScrollDown: action.payload}\n        case actions.ADD_QUANTITY_LOAD_MESSAGES:\n            return{...state, quantityLoadMessages: action.payload}\n        case actions.ADD_MESSAGES:\n            return {...state, messagesRedux: action.payload}\n        case actions.ADD_ALL_CURRENT_USER_IDS:\n            return {...state, allCurrentUserIDsRedux: action.payload}\n        case actions.ADD_ALL_CURRENT_USER_EMAILS:\n            return{...state, allCurrentUserEmailsRedux: action.payload}\n        case actions.ADD_ALL_USER_EMAILS:\n            return {...state, allUserEmailsRedux: action.payload}\n        case actions.ADD_NEW_MESSAGE_OTHER_USER_EMAIL:\n            return {...state, newMessageOtherUserEmailRedux: action.payload}\n        case actions.ADD_EMAIL:\n            return {...state, emailRedux: action.payload}\n        case actions.ADD_CURRENT_CHAT_ID:\n            return {...state, currentChatIDRedux: action.payload}\n        case actions.ADD_USER:\n            return {...state, userRedux: action.payload}\n        case actions.ADD_USERID:\n            return{...state, userID: action.payload}\n        default:\n            return state\n    }\n}","import * as actions from '../actions/inboxActions'\n\nconst initialState = {\n    isInboxTab: true,\n    allInfoInbox: [],\n    isLoop: true,\n}\n\nexport default function inboxReducer(state=initialState, action){\n    switch(action.type){\n        case actions.IS_LOOP:\n            return{...state, isLoop: action.payload}\n        case actions.IS_INBOX_TAB:\n            return {...state, isInboxTab: action.payload}\n        case actions.ADD_ALL_INFO_INBOX:\n            return{...state, allInfoInbox: action.payload}\n        default:\n            return state\n    }\n}\n","export const ADD_INBOX_MESSAGES = \"ADD_INBOX_MESSAGES\"\nexport const ADD_ALL_INFO = 'ADD_ALL_INFO'\n\nexport const addInboxMessages = (messages) => {\n    return (dispatch) => {\n        dispatch({type: ADD_INBOX_MESSAGES, payload: messages})\n    }\n}\n\nexport const addAllInfo = (allInfo) => {\n    return(dispatch)=> {\n        dispatch({type: ADD_ALL_INFO, payload: allInfo})\n    }\n}","import * as actions from '../actions/inboxContainerActions'\n\nexport const initialState = {\n    messagesInboxRedux: [],\n    allInfoRedux: [],\n}\n\nexport default function inboxContainerReducer(state=initialState, action) {\n    switch (action.type){\n        case actions.ADD_INBOX_MESSAGES:\n            return {...state, messagesInboxRedux: action.payload}\n        case actions.ADD_ALL_INFO:\n            return {...state, allInfoRedux: action.payload}\n        default:\n            return state\n    }\n}\n","import * as actions from '../actions/requestsActions'\n\nexport const initialState = {\n    requestCount: 0,\n    isMessageRequest: false,\n}\n\nexport default function requestsReducer(state=initialState, action) {\n    switch(action.type) {\n        case actions.ADD_REQUEST_COUNT:\n            return {...state, requestCount: action.payload}\n        case actions.IS_MESSAGE_REQUEST:\n            return {...state, isMessageRequest: action.payload}\n        default:\n            return state\n    }\n}","import { combineReducers } from 'redux'\nimport appReducer from './appReducer'\nimport inboxReducer from './inboxReducer'\nimport inboxContainerReducer from './inboxContainerReducer'\nimport requestsReducer from './requestsReducer'\n\nconst rootReducer = combineReducers ({\n    app: appReducer,\n    inbox: inboxReducer,\n    inboxContainer: inboxContainerReducer,\n    requests: requestsReducer,\n})\n\nexport default rootReducer","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './Components/App';\nimport * as serviceWorker from './serviceWorker';\nimport { IndexContainer } from \"./Styles/Index.styles\"\nimport 'tachyons';\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware } from \"redux\"\nimport rootReducer from './Redux/reducers/rootReducer'\nimport thunk from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk))\n)\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <IndexContainer>\n        <App />\n      </IndexContainer>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}